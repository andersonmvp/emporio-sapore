!function($){"use strict";$(function(){function o(){I=$("form .single_add_to_cart_button, .variations .single_add_to_cart_button"),z=F.find(".woofc-body"),D=z.find("ul").eq(0),N=F.find(".woofc-checkout").find("span.amount"),j=F.find(".woofc-trigger"),W=j.find(".woofc-count"),A=F.find(".woofc-spinner-wrap"),E=F.find(".woofc-cart-error"),Q=F.find(".woofc-undo")}function t(o,t,e){var a="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";t?o.one(a,function(){$(this).off(a),e($(this))}):o.on(a,function(){$(this).off(a),e($(this))})}function e(o,t,e){var a="webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend";t?o.one(a,function(){$(this).off(a),e($(this))}):o.on(a,function(){$(this).off(a),e($(this))})}function a(o){return console.log(o.closest(".wc-product-table").length),!(!o.hasClass("gform_button")&&!o.closest(".wc-product-table").length)}function n(o){var t=o.closest("form"),e=0;if(t.find(".required-product-addon").each(function(){var o=$(this),t=$(this).find("input");t.length>1?(o.removeClass("woofc-error"),t.is(":checked")||(e++,o.addClass("woofc-error"))):(o.removeClass("woofc-error"),""===t.val()&&(e++,o.addClass("woofc-error")))}),e>0){var a=t.find(".required-product-addon.woofc-error").first();$("html,body").animate({scrollTop:a.offset().top-100},500)}return 0===e}function i(o){G=!0;var e=void 0===o?F.hasClass("woofc-cart-open"):o;e?(F.removeClass("woofc-cart-open"),B=!1,v(),setTimeout(function(){z.scrollTop(0),C()},500)):(F.addClass("woofc-cart-open"),B=!0),t(F,!0,function(){G=!1,e?F.removeClass("woofc-cart-opened"):F.addClass("woofc-cart-opened")})}function r(o,t){if(t=void 0!==t?t:null,L&&clearInterval(L),o.data("loading")||K)return!1;var e,a=o.hasClass("single_add_to_cart_button"),n=!1;a&&(n=o.closest(".variations").length);var i={};if(o.removeClass("added"),!a||t)e="add",i={fragments:t};else{e="single-add";var r=o.closest("form");i=r.serializeJSON(),"string"==typeof i&&(i=$.parseJSON(i)),"object"==typeof i&&(i["add-to-cart"]=r.find('[name="add-to-cart"]').val())}o.data("loading",!0),o.addClass("loading"),l(e,i,function(t){M?(o.removeClass("loading"),o.removeData("loading")):("1"===F.attr("data-flytocart")?c(o,a,n):n||s(),o.removeClass("loading").addClass("added"),o.removeData("loading"),$(document.body).trigger("woofc_added_to_cart",[t]),L=setTimeout(function(){o.removeClass("added")},3e3))}),C()}function c(o,t,e){var a=null,n=$("body"),i=F.attr("data-position");if(t)if((a=f(o))&&0===a.length){var r=n.find('input[name="add-to-cart"]');if(r.length){var l=r.val();if(o=$('.add_to_cart_button[data-product_id="'+l+'"]'),o.length)return c(o,t,e),!1}}else e||s();else a=d(o);if(!a||0===a.length)return!1;var u=a.offset(),m=j.offset(),w={opacity:1,top:u.top,left:u.left,width:a.width(),height:a.height(),transform:"scale(1)"},p=0,v=0;"bottom-right"===i?(p=-1,v=-1):"bottom-left"===i?(p=-1,v=1):"top-right"===i?(p=1,v=-1):"top-left"===i&&(p=1,v=1);var g={top:m.top+j.height()/2-w.height/2+o.height()*p,left:m.left+j.width()/2-w.width/2+o.width()*v,opacity:.9,transform:"scale(0.5)"},h={top:m.top+j.height()/2-w.height/2,left:m.left+j.width()/2-w.width/2,opacity:0,transform:"scale(0)"},_=a.clone();_.find(".add_to_cart_button").remove(),_.css(w),_.addClass("woofc-fly-to-cart"),_.appendTo(n);var y=F.attr("data-flyduration")?F.attr("data-flyduration"):650;y=parseInt(y)/1e3,TweenLite.to(_,y,{css:g,ease:Power3.easeOut,onComplete:function(){TweenLite.to($(this.target),.8*y,{css:h,ease:Power3.easeOut,onComplete:function(){$(this.target).remove(),s()}})}})}function s(){var o=F.attr("data-shaketrigger");""!==o&&(j.addClass("woofc-shake-"+o),e(j,!1,function(t){t.removeClass("woofc-shake-"+o),"1"===F.attr("data-opencart-onadd")&&i(!1)}))}function d(o){var t=null;if(o.closest(".product").length){var e=o.closest(".product");t=e.find(".attachment-woocommerce_thumbnail").length?e.find(".attachment-woocommerce_thumbnail"):e}return t}function f(o){var t=null;if(o.closest(".product-row").find(".product-table-image").length)t=o.closest(".product-row").find(".product-table-image");else if(o.closest(".variations").find(".image_link img").length)t=o.closest(".variations").find(".image_link img");else if(o.closest(".woo-quick-view").length)t=$(".wooqv-slider-wrapper");else if(o.closest(".product-quick-view-container").length)t=o.closest(".product-quick-view-container").find(".slide.first img");else if(o.closest(".product").length){var e=o.closest(".product");e.find(".images img.attachment-shop_single").length?t=e.find(".images img.attachment-shop_single").first():e.find(".magic-slide").length?t=e.find(".magic-slide"):e.find(".woocommerce-product-gallery .woocommerce-product-gallery__image").length?t=e.find(".woocommerce-product-gallery .woocommerce-product-gallery__image").first():e.find(".images img").length&&(t=e.find(".images img").fisrt())}return t}function l(o,t,e){if(M=!1,$("html").addClass("woofc-loading"),$("body").hasClass("woocommerce-cart")){if(K)return!1;K=!0}if("remove"!==o&&"undo"!==o&&(Cookies.remove("woofc_last_removed"),Q.removeClass("woofc-visible")),"refresh"===o)return u(o,e),!1;if("add"===o)return m(t,o,e),!1;var a={action:"woofc_update_cart",type:o};a=$.extend(a,t),"single-add"===o?($(".woocommerce-error").remove(),$.woofcAjaxQueue({url:location.href,data:a,type:"post"}).done(function(o){o&&$(o).find(".woocommerce-error").length>0&&(M=!0,$("#product-"+a["add-to-cart"]).before($(o).find(".woocommerce-error")),m(o,"single-error",e))}),u(o,e)):($.woofcAjaxQueue({url:WOOFC.ajaxurl,data:a,type:"post"}),u(o,e))}function u(o,t){$.woofcAjaxQueue({url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"post",success:function(e){m(e,o,t)}})}function m(o,t,e){"single-error"!==t&&("remove"===t||"undo"===t?$.each(o.fragments,function(o,t){"woofc"===o?(y(t.subtotal),_(t.total_items)):-1!==o.search(".woofc")&&$(o).replaceWith(t)}):$.each(o.fragments,function(o,t){"woofc"!==o&&$(o).replaceWith(t)}),R&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(o.fragments)),T(o.cart_hash),o.cart_hash&&k()),$(document.body).trigger("wc_fragments_refreshed"),C());var a=F.attr("data-loadingtimeout")?parseInt(F.attr("data-loadingtimeout")):0;setTimeout(function(){$("html").addClass("woofc-stoploading"),setTimeout(function(){$("html").removeClass("woofc-loading woofc-stoploading"),void 0!==e&&e(o)},a)},100),K=!1}function w(o,t,e){t>0?l("update",{cart_item_key:o,cart_item_qty:t},function(a){$(document.body).trigger("woofc_product_update",[o,t]),void 0!==e&&e(a)}):p(o,e)}function p(o,t){q();var e=new Date;e.setTime(e.getTime()+8e3),Cookies.set("woofc_last_removed",{key:o,html:D.find(".woofc-deleted"),position:D.find(".woofc-deleted").index()},{expires:e}),l("remove",{cart_item_key:o},function(){v();var e=D.find('li[data-key="'+o+'"]');if(e.length>0){var a=e.hasClass("woofc-bundle"),n=e.hasClass("woofc-composite"),i=e.offset().top-z.children("ul").offset().top,r="";e.css("top",i+"px")}var c=0;if(a||n){var s=e.data("key");r=a?'.woofc-bundled-item[data-group="'+s+'"]':'.woofc-composite-item[data-group="'+s+'"]';$(D.find(r).get().reverse()).addClass("woofc-deleted")}setTimeout(function(){e.addClass("woofc-deleted"),C()},0),Q.data("key",o).addClass("woofc-visible"),$(document.body).trigger("woofc_product_removed",[o]),P=setTimeout(function(){v(),void 0!==t&&t()},8e3)})}function v(){P&&clearInterval(P),Cookies.remove("woofc_last_removed"),Q.removeData("key").removeClass("woofc-visible"),D.find(".woofc-deleted").remove()}function g(o,t){l("undo",{cart_item_key:o},t)}function h(o){l("refresh",{},o)}function _(o){var t=F.hasClass("woofc-empty"),e=o+1;t?(W.find("li").eq(0).text(o),W.find("li").eq(1).text(e)):(W.addClass("woofc-update-count"),setTimeout(function(){W.find("li").eq(0).text(o)},150),setTimeout(function(){W.removeClass("woofc-update-count")},200),setTimeout(function(){W.find("li").eq(1).text(e)},230)),b()}function y(o){N=F.find(".woofc-checkout").find("span.amount"),N.html(o)}function C(){0===D.find("li:not(.woofc-deleted):not(.woofc-no-product)").length?F.addClass("woofc-empty"):F.removeClass("woofc-empty")}function b(){Number(W.find("li").eq(0).text())>99?W.addClass("woofc-count-big"):W.removeClass("woofc-count-big")}function k(){R&&sessionStorage.setItem("wc_cart_created",(new Date).getTime())}function T(o){R&&(localStorage.setItem(U,o),sessionStorage.setItem(U,o))}function x(o,a){q(),void 0!==a&&a.removeClass("woofc-shake"),E.removeClass("woofc-shake woofc-visible"),setTimeout(function(){E.text(o).addClass("woofc-visible"),t(E,!0,function(){E.addClass("woofc-shake"),void 0!==a&&a.addClass("woofc-shake"),e(E,!0,function(){E.removeClass("woofc-shake"),J=setTimeout(function(){E.removeClass("woofc-visible")},5e3)})})},100)}function q(){J&&clearInterval(J),Q.removeClass("woofc-visible"),E.removeClass("woofc-visible")}function O(){return"ontouchstart"in document.documentElement?($("html").addClass("woofc-touchevents"),!0):($("html").addClass("woofc-no-touchevents"),!1)}if("undefined"==typeof wc_cart_fragments_params)return!1;var F=$(".woofc");if(F.length>0){var S=O(),I,z,D,N,j,W,A,E,Q,J,P,L,B=!1,G=!1,H=!1,K=!1,M=!1;o();var R,U=wc_cart_fragments_params.ajax_url.toString()+"-wc_cart_hash";try{R="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc"),window.localStorage.setItem("wc","test"),window.localStorage.removeItem("wc")}catch(o){R=!1}var V=F.attr("data-triggerevent"),X=F.attr("data-hoverdelay")?F.attr("data-hoverdelay"):0;if(S&&"mouseenter"===V&&(V="vclick"),$(document.body).on("added_to_cart",function(o,t,e,a){r(a,t)}),$(document).on("click",I.selector,function(o){var t=$(this);a(t)||(o.preventDefault(),o.stopPropagation(),n(t)&&r(t))}),$(document.body).on("updated_wc_div updated_cart_totals applied_coupon removed_coupon",function(){H||h()}),$("body").hasClass("woocommerce-cart")&&$(document.body).on("woofc_product_update woofc_product_removed woofc_undo_product_remove",function(){K||(H=!0,$(document.body).trigger("wc_update_cart"),$(document).ajaxComplete(function(o,t,e){e.url===wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments")&&(H=!1,$(o.currentTarget).unbind("ajaxComplete"))}))}),$(document.body).on("wc_fragments_refreshed",function(){o(),$("body").hasClass("woocommerce-checkout")&&$(document.body).trigger("update_checkout")}),j.on("vclick",function(o){o.preventDefault(),G||i()}),"mouseenter"===V){var Y;j.on("mouseenter",function(o){Y=setTimeout(function(){B||G||(o.preventDefault(),i())},X)}).on("mouseleave",function(){clearTimeout(Y)})}F.on("vclick",function(o){$(o.target).is($(this))&&i(!0)}),z.on("vclick",".woofc-delete-item",function(o){o.preventDefault(),p($(o.target).parents(".woofc-product").data("key"))}),$(document).on("change",".woofc-quantity input",function(){var o=$(this).parent(),t=parseFloat($(this).attr("min")),e=parseFloat($(this).attr("max"));t&&t>0&&parseFloat($(this).val())<t?($(this).val(t),x(WOOFC.lang.min_qty_required,o)):e&&e>0&&parseFloat($(this).val())>e&&($(this).val(e),x(WOOFC.lang.max_stock_reached,o));var a=$(this).closest(".woofc-product"),n=$(this).val();w(a.data("key"),n)}),$(document).on("vclick",".woofc-quantity-up, .woofc-quantity-down",function(o){o.preventDefault();var t=$(this).closest(".woofc-quantity"),e=t.find("input"),a=parseFloat(e.val()),n=parseFloat(e.attr("max")),i=parseFloat(e.attr("min")),r=e.attr("step"),c=a;a&&""!==a&&"NaN"!==a||(a=0),""!==n&&"NaN"!==n||(n=""),""!==i&&"NaN"!==i||(i=0),"any"!==r&&""!==r&&void 0!==r&&"NaN"!==parseFloat(r)||(r=1),$(this).is(".woofc-quantity-up")?n&&(n===a||a>n)?(c=n,x(WOOFC.lang.max_stock_reached,t)):c=a+parseFloat(r):i&&(i===a||a<i)?(c=i,x(WOOFC.lang.min_qty_required,t)):a>0&&(c=a-parseFloat(r));var s=e.closest(".woofc-product"),d=s.data("key");a!==c&&w(d,c)}),Q.on("vclick","a",function(o){P&&clearInterval(P),o.preventDefault();var t=0,a=D.find(".woofc-deleted");a.each(function(o){var e=$(this);t+=300,setTimeout(function(){e.addClass("woofc-undo-deleted")},t)}),e(a,!0,function(o){o.removeClass("woofc-deleted woofc-undo-deleted").removeAttr("style");var t=Q.data("key");g(t,function(){$(document.body).trigger("woofc_undo_product_remove",[t])}),C()}),setTimeout(function(){Q.removeClass("woofc-visible")})});var Z="";I.length>0&&(Z=I.html(),""!==Z&&I.html(WOOFC.lang.wait),I.data("loading",!0).addClass("loading")),b(),h(function(){I.length&&(I.removeData("loading").removeClass("loading"),""!==Z&&I.html(Z)),$("body").addClass("woofc-ready"),$(document).trigger("woofc_ready")})}$(document).ready(function(){"undefined"!=typeof wp&&void 0!==wp.customize&&void 0!==wp.customize.preview&&(wp.customize.value("woofc[cart_product_show_bundled_products]").bind(function(){top.wp.customize.previewer.save()}),wp.customize.value("woofc[cart_product_show_composite_products]").bind(function(){top.wp.customize.previewer.save()}),wp.customize.value("woofc[cart_product_show_attributes]").bind(function(){top.wp.customize.previewer.save()}),wp.customize.value("woofc[cart_product_attributes_hide_label]").bind(function(){top.wp.customize.previewer.save()}),wp.customize.preview.bind("saved",function(){h()}))}),window.woofc_refresh_cart=h})}(jQuery,window);
!function($){"use strict";var e={};e.notices={init:function(){setTimeout(function(){$(".woofc-notice").each(function(){$(this).prependTo("#wpbody-content")})},10)}},e.license={init:function(){var e=this,i=function(){e.initLicenseForm($(this))};$(".woofc-license-activation").each(i)},initLicenseForm:function(e){function i(e){"valid"===e.code?t(e):"exists"===e.code?n(e):"revoked"===e.code?o(e):c(e)}function n(e){u.hide(),v.hide(),y.hide(),p.hide(),m.hide(),h.fadeIn(),h.find('input[name="purchase_code"]').val(e.license.purchase_code),h.find('input[name="domain"]').val(e.license.domain),w.html(e.license_summary).fadeIn()}function o(e){a(),w.empty().hide(),y.html(e.msg),y.fadeIn(),m.hide()}function a(){w.empty().hide(),h.hide(),m.hide(),v.hide(),y.hide(),p.hide(),u.fadeIn()}function t(e){h.hide(),u.hide(),y.hide(),p.hide(),v.fadeIn(),m.fadeIn(),w.html(e.license_summary).fadeIn(),m.find('[name="purchase_code"]').val(e.license.purchase_code),m.find('[name="domain"]').val(e.license.domain),$(document).trigger("woofc-license-activated",[e.license,e.license_summary,w])}function c(){h.hide(),u.hide(),y.hide(),m.hide(),v.hide(),p.fadeIn();var e=3;_.html(e),e--;var i=setInterval(function(){0===e?(_.empty(),clearInterval(i),a()):(_.html(e),e--)},1e3)}var d=$(e).data("id"),f=$(e).data("homeurl"),l=$(e).data("domain"),s=$(e).data("ajaxurl"),r=$(e).find(".woofc-license-form"),u=$(e).find("#woofc-license-activation-form"),h=$(e).find("#woofc-license-revoke-form"),m=$(e).find("#woofc-license-local-revoke-form"),v=$(e).find("#woofc-license-activated"),p=$(e).find("#woofc-license-invalid"),w=$(e).find(".woofc-license-info"),y=$(e).find(".woofc-license-revoke-info"),_=$(e).find(".woofc-license-timer");r.each(function(){var e=$(this);e.find('input[type="submit"]').on("click",function(n){n.preventDefault();var o=$(this),a=o.val();if(o.val("Processing..."),o.attr("disabled",!0),e.find('input[name="action"]').val()==="woofc_license_activation_"+d){var t=""!==l?l:location.host.replace("www.",""),c=f;e.find('input[name="domain"]').val(t),e.find('input[name="installation_url"]').val(c)}var r=e.find(":input").serialize();console.log(r),$.ajax({cache:!1,url:s,type:"POST",data:r,dataType:"json"}).done(function(e){i(e),o.val(a),o.removeAttr("disabled")}).fail(function(e){alert("Something went wrong! Please try again later!"),o.val(a),o.removeAttr("disabled")})})}),h.find(".woofc-license-revoke-cancel").on("click",function(e){e.preventDefault(),a()})}},$(document).ready(function(){e.notices.init(),e.license.init()})}(jQuery);